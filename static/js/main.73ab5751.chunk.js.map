{"version":3,"sources":["api/movies.txt","api/api.ts","components/MoviesList/MoviesList.tsx","components/MovieDetails/MovieDetails.tsx","components/NewMovieForm/NewMovieForm.tsx","App.tsx","index.tsx"],"names":["API_URL","createUser","a","fetch","method","headers","body","redirect","response","ok","Error","status","statusText","json","result","createSession","sendMovies","token","formData","FormData","movies","then","blob","formattedMovies","append","getAllMovies","data","getMovieByID","movieId","createMovie","movie","JSON","stringify","deleteMovie","MoviesList","selectedMovieId","preparedMovies","seeMovieDetails","closeMovieDetails","updateMovies","className","map","title","year","type","onClick","tokenForLogin","localStorage","getItem","id","MovieDetails","React","memo","useState","setMovie","loadMovieDetails","selectedMovie","find","useEffect","format","actors","actor","name","NewMovieForm","setTitle","setYear","setFormat","setActors","unformattedActors","setUnformattedActors","handleInputChange","event","target","value","Number","split","handleSubmit","preventDefault","onSubmit","htmlFor","placeholder","onChange","App","setMovies","titleToSearch","setTitleToSearch","actorToSearch","setActorToSearch","isSortedAlphabetically","setIsSortedAlphabetically","setSelectedMovieId","createToken","setItem","console","log","loadDetailedMovies","useCallback","moviesIds","Promise","all","detailedMovies","filteredMovies","useMemo","filter","toLowerCase","includes","some","sort","movie1","movie2","localeCompare","toLocaleLowerCase","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.73ab5751.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/movies.1ceaf0e8.txt\";","import { CreatedMovie } from \"../types\";\nimport movies from './movies.txt';\n\nconst API_URL = 'http://localhost:8000/api/v1/movies';\n\n  // creating user\n  export const createUser = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/v1/users', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n         },\n        body: \"{\\n    \\\"email\\\": \\\"mariiaobraztsova0@gmail.com\\\",\\n    \\\"name\\\": \\\"Obraztsova Mariia\\\",\\n    \\\"password\\\": \\\"super-password3000\\\",\\n    \\\"confirmPassword\\\": \\\"super-password3000\\\"\\n}\",\n        redirect: 'follow',\n      });\n  \n      if (!response.ok) {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n  \n      const result = await response.json();\n      return result;\n    } catch (error) {\n      throw new Error(`The problem is here ${error}`);\n    }\n  }\n\n  //creating session\n  export const createSession = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/v1/sessions', {\n        method: 'POST',\n        body: \"{\\n    \\\"email\\\": \\\"mariiaobraztsova0@gmail.com\\\",\\n    \\\"password\\\": \\\"super-password3000\\\"\\n}\",\n        redirect: 'follow',\n      });\n  \n      if (!response.ok) {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n\n      //const result = await response.json();\n      return response.json();\n    } catch (error) {\n      throw new Error(`The problem is here ${error}`);\n    }\n  }\n\n// downoload movies to the doker\n  export const sendMovies = async (token: string) => {\n    try {\n      const formData = new FormData();\n      const formattedMovies = await fetch(movies).then(response => response.blob());\n\n      formData.append(\"movies\", formattedMovies);\n\n      const response = await fetch(`${API_URL}/import`, {\n        method: 'POST',\n        headers: {\n          'Authorization':token,\n        },\n        body: formData,\n        redirect: 'follow',\n      });\n\n      if (!response.ok) {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n\n      return response.json();\n    } catch (error) {\n      throw new Error(`The problem is here ${error}`);\n    }\n  };\n\n// downoload movies from server\nexport const getAllMovies = async (token: string) => {\n  try {\n    const response = await fetch(`${API_URL}?limit=30`, {\n      method: 'GET',\n      headers: {\n        'Authorization': token,\n      },\n      redirect: 'follow',\n    });\n\n    if (!response.ok) {\n      throw new Error(`${response.status} - ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    return result.data;\n  } catch (error) {\n    throw new Error(`The problem is here ${error}`);\n  }\n};\n\nexport const getMovieByID = async (movieId: number, token: string) => {\n  try {\n    const response = await fetch(`${API_URL}/${movieId}`, {\n      method: 'GET',\n      headers: {\n        'Authorization':token,\n      },\n      redirect: 'follow',\n    });\n\n    if (!response.ok) {\n      throw new Error(`${response.status} - ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    return result.data;\n  } catch (error) {\n    throw new Error(`The problem is here ${error}`);\n  }\n};\n\n// create new movie on server\nexport const createMovie = async (movie: CreatedMovie, token: string) => {\n  const response = await fetch(API_URL, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': token,\n    },\n    body: JSON.stringify(movie),\n    redirect: 'follow',\n  });\n\n  if (!response.ok) {\n    throw new Error(`${response.status} - ${response.statusText}`);\n  }\n\n  return response.json();\n};\n\n// delete movie from server\nexport const deleteMovie = async (movieId: number, token: string) => {\n  const response = await fetch(`http://localhost:8000/api/v1/movies/${movieId}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': token,\n    },\n    redirect: 'follow',\n  });\n\n  if (!response.ok) {\n    throw new Error(`${response.status} - ${response.statusText}`);\n  }\n\n  return response.json();\n};\n","import React from 'react';\nimport { Movie } from '../../types';\nimport './MoviesList.css';\n\nimport { deleteMovie } from '../../api/api';\n\ntype Props = {\n  selectedMovieId: number,\n  preparedMovies: Movie[],\n  seeMovieDetails: (movieId: number) => void,\n  closeMovieDetails: () => void,\n  updateMovies: () => void,\n}\n\nexport const MoviesList: React.FC<Props> = ({\n  selectedMovieId,\n  preparedMovies,\n  seeMovieDetails,\n  closeMovieDetails,\n  updateMovies,\n}) => {\n  return (\n    <div className=\"MoviesList\">\n      <h2>\n        Movies List\n      </h2>\n\n      <ul className=\"MoviesList__list\">\n        {preparedMovies.map(movie => (\n          <li\n            key={movie.id}\n            className=\"MoviesList__item\"\n          >\n            {`${movie.title}, ${movie.year}`}\n\n            <div className=\"MovieList__buttons\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const tokenForLogin = localStorage.getItem('token') || '';\n                  deleteMovie(movie.id, tokenForLogin);\n                  updateMovies();\n                }}\n              >\n                Delete movie\n              </button>\n\n              {movie.id === selectedMovieId ? (\n                <button\n                type=\"button\"\n                onClick={closeMovieDetails}\n              >\n                Close\n              </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={() => seeMovieDetails(movie.id)}\n                >\n                View details\n              </button>\n              )}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport { Movie } from '../../types';\nimport './MovieDetails.css';\n\ntype Props = {\n  movieId: number,\n  movies: Movie[]\n}\n\nexport const MovieDetails: React.FC<Props> = React.memo(\n  ({ movieId, movies }) => {\n    const [ movie, setMovie ] = useState<Movie>();\n\n    // downoload movie details by movie id\n    const loadMovieDetails = async () => {\n      const selectedMovie = movies.find(movie => movie.id === movieId);\n\n      setMovie(selectedMovie);\n    };\n\n    useEffect(() => {\n      loadMovieDetails();\n    }, [movieId]);\n\n    return (\n      <div className=\"MovieDetail\">\n        {movie ? (\n        <>\n          <h2>\n            {`${movie.title}, ${movie.year}`}\n          </h2>\n\n          <p>\n            {`Format: ${movie.format}`}\n          </p>\n\n          <ul className=\"MovieDetail__actors\">\n            Actors:\n            {movie.actors.map(actor => (\n              <li\n                key={actor.name}\n                className=\"MovieDetail__actor\"\n              >\n                {actor.name}\n              </li>\n            ))}\n          </ul>\n        </>\n        ) : (\n          <h2>\n            No movie found\n          </h2>\n        )}\n      </div>\n    )\n  }\n);\n","import React, { useState } from 'react';\nimport './NewMovieForm.css'\nimport { createMovie } from '../../api/api';\n\ntype Props = {\n  updateMovies: () => void,\n}\n\nexport const NewMovieForm: React.FC<Props> = React.memo(\n    ({ updateMovies }) => {\n    const [title, setTitle] = useState('');\n    const [year, setYear] = useState(2021);\n    const [format, setFormat] = useState('');\n    const [actors, setActors] = useState<string[]>([]);\n    const [unformattedActors, setUnformattedActors] = useState<string>('');\n\n    // processing controled inputs\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n      const { name, value } = event.target\n\n      switch (name) {\n        case 'title':\n          setTitle(value);\n          break;\n        case 'year':\n          setYear(Number(value));\n          break;\n        case 'format':\n          setFormat(value);\n          break;\n        case 'actors':\n          setUnformattedActors(value);\n          const actors = value.split(',');\n\n          setActors(actors);\n          break;\n        default:;\n      }\n    }\n\n    // clear form fields afrter submit\n    const clearForm = () => {\n      setTitle('');\n      setYear(2021);\n      setFormat('');\n      setActors([]);\n      setUnformattedActors('');\n    }\n\n    // processing form submit\n    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n\n      const tokenForLogin = localStorage.getItem('token') || '';\n      const newMovie = await createMovie({\n        title,\n        year,\n        format,\n        actors,\n      }, tokenForLogin);\n\n      if (newMovie) {\n        updateMovies();\n      }\n\n      clearForm();\n    };\n\n    return (\n      <form\n        className=\"NewMovieForm\"\n        onSubmit={handleSubmit}\n      >\n        <label htmlFor=\"title\">\n          Title:\n          <input\n            className=\"NewMovieForm__input\"\n            type=\"text\"\n            id=\"title\"\n            placeholder=\"Enter title\"\n            value={title}\n            name=\"title\"\n            onChange={handleInputChange}\n          />\n        </label>\n\n        <label htmlFor=\"year\">\n          Year:\n          <input\n            className=\"NewMovieForm__input\"\n            type=\"text\"\n            id=\"year\"\n            placeholder=\"Enter year\"\n            value={year}\n            name=\"year\"\n            onChange={handleInputChange}\n          />\n        </label>\n\n        <label htmlFor=\"format\">\n          Format:\n          <select\n            className=\"NewMovieForm__input\"\n            id=\"format\"\n            value={format}\n            name=\"format\"\n            onChange={handleInputChange}\n          >\n            <option value=\"\">\n              Choose a format\n            </option>\n\n            <option value=\"VHS\">\n              VHS\n            </option>\n\n            <option value=\"DVD\">\n              DVD\n            </option>\n\n            <option value=\"Blu-Ray\">\n              Blu-Ray\n            </option>\n          </select>\n        </label>\n\n        <label htmlFor=\"actors\">\n          Actors:\n          <input\n            className=\"NewMovieForm__input\"\n            type=\"text\"\n            id=\"actors\"\n            placeholder=\"Enter actors divided by , \"\n            value={unformattedActors}\n            name=\"actors\"\n            onChange={handleInputChange}\n          />\n        </label>\n\n        <button\n          type=\"submit\"\n          className=\"NewMovieForm__button\"\n        >\n          Add a movie\n        </button>\n      </form>\n    )\n  }\n)\n","import React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport './App.css';\nimport './normalization.css'\nimport { Movie } from './types';\nimport { sendMovies, getAllMovies, getMovieByID, createUser, createSession } from './api/api';\n\nimport { MoviesList } from './components/MoviesList/MoviesList';\nimport { MovieDetails } from './components/MovieDetails/MovieDetails';\nimport { NewMovieForm } from './components/NewMovieForm/NewMovieForm';\n\nconst App: React.FC = () => {\n  const [movies, setMovies] = useState<Movie[]>();\n  const [titleToSearch, setTitleToSearch] = useState('');\n  const [actorToSearch, setActorToSearch] = useState('');\n  const [isSortedAlphabetically, setIsSortedAlphabetically] = useState(false);\n  const [selectedMovieId, setSelectedMovieId] = useState(0);\n\n  const createToken = async () => {\n    const token = await createUser();\n\n    localStorage.setItem('token', token.token);\n    console.log(token);\n  }\n\n  useEffect(() => {\n    createToken();\n    const tokenForLogin = localStorage.getItem('token') || '';\n    createSession();\n    sendMovies(tokenForLogin);\n  }, []);\n\n    // downoload movies with actors\n    const loadDetailedMovies = useCallback(async () => {\n      const tokenForLogin = localStorage.getItem('token') || '';\n      const movies: Movie[] = await getAllMovies(tokenForLogin);\n      const moviesIds = movies.map(movie => movie.id);\n\n      const detailedMovies = await Promise.all(moviesIds.map((id: number) => getMovieByID(id, tokenForLogin)));\n\n      setMovies(detailedMovies);\n    }, []);\n\n  useEffect(() => {\n    loadDetailedMovies();\n  }, [ loadDetailedMovies ]);\n\n  // filter and sort movies\n  const filteredMovies = useMemo(() => {\n    if (movies) {\n      return movies\n        .filter(movie => {\n          if (titleToSearch) {\n            return movie.title.toLowerCase().includes(titleToSearch)\n          }\n\n          return movie;\n        })\n        .filter(movie => {\n          if (actorToSearch) {\n            return movie.actors.some(actor => actor.name.toLowerCase().includes(actorToSearch))\n          }\n\n          return movie;\n        })\n        .sort((movie1, movie2) => {\n          if (isSortedAlphabetically) {\n            return movie1.title.localeCompare(movie2.title);\n          }\n\n          return 0;\n        });\n    }\n  }, [movies, titleToSearch, actorToSearch, isSortedAlphabetically]);\n\n// processing controlled inputs for searching by title and actor\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = event.target\n\n    switch (name) {\n      case 'titleToSearch':\n        setTitleToSearch(value.toLocaleLowerCase());\n        break;\n      case 'actorToSearch':\n        setActorToSearch(value.toLocaleLowerCase());\n        break;\n      default:;\n    }\n  };\n\n  // reset all filters and sorting\n  const handleResetButton = () => {\n    setTitleToSearch('');\n    setActorToSearch('');\n    setIsSortedAlphabetically(false);\n  };\n\n  // set movie id to render movie details\n  const seeMovieDetails = (movieId: number) => {\n    setSelectedMovieId(movieId);\n  };\n\n  // reset rendering movie details\n  const closeMovieDetails = () => {\n    setSelectedMovieId(0);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <div className=\"App__form\">\n          <NewMovieForm\n            updateMovies={loadDetailedMovies}\n          />\n        </div>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          {filteredMovies && (\n            <>\n              <div className=\"App__filters\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter title\"\n                  value={titleToSearch}\n                  name=\"titleToSearch\"\n                  onChange={handleInputChange}\n                />\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter actor\"\n                  value={actorToSearch}\n                  name=\"actorToSearch\"\n                  onChange={handleInputChange}\n                />\n\n                <button\n                  type=\"button\"\n                  onClick={() => setIsSortedAlphabetically(true)}\n                >\n                  Sort alphabetically\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={handleResetButton}\n                >\n                  Reset\n                </button>\n              </div>\n\n              <MoviesList\n                selectedMovieId={selectedMovieId}\n                preparedMovies={filteredMovies}\n                seeMovieDetails={seeMovieDetails}\n                closeMovieDetails={closeMovieDetails}\n                updateMovies={loadDetailedMovies}\n              />\n            </>\n          )}\n        </div>\n\n        <div className=\"App__content\">\n          {selectedMovieId > 0 && filteredMovies && (\n            <MovieDetails\n              movieId={selectedMovieId}\n              movies={filteredMovies}\n            />\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}