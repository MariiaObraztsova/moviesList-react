(this["webpackJsonpmovieslist-react"]=this["webpackJsonpmovieslist-react"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(2),i=n.n(c),o=n(4),s=n(3),u=n(1),l=n.n(u),j=(n(12),n(13),n.p,"http://localhost:8000/api/v1/movies"),b=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(j,{method:"GET",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("".concat(t.status," - ").concat(t.statusText));case 6:return e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("The problem is here ".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(j,"/").concat(t),{method:"GET",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a.data);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("The problem is here ".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j,{method:"POST",headers:{"Content-type":"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},body:JSON.stringify(t),redirect:"follow"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/movies/".concat(t),{method:"DELETE",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=(n(14),n(0)),f=function(e){var t=e.selectedMovieId,n=e.preparedMovies,a=e.seeMovieDetails,r=e.closeMovieDetails,c=e.updateMovies;return Object(m.jsxs)("div",{className:"MoviesList",children:[Object(m.jsx)("h2",{children:"Movies List"}),Object(m.jsx)("ul",{className:"MoviesList__list",children:n.map((function(e){return Object(m.jsxs)("li",{className:"MoviesList__item",children:["".concat(e.title,", ").concat(e.year),Object(m.jsxs)("div",{className:"MovieList__buttons",children:[Object(m.jsx)("button",{type:"button",onClick:function(){d(e.id),c()},children:"Delete movie"}),e.id===t?Object(m.jsx)("button",{type:"button",onClick:r,children:"Close"}):Object(m.jsx)("button",{type:"button",onClick:function(){return a(e.id)},children:"View details"})]})]},e.id)}))})]})},v=(n(16),l.a.memo((function(e){var t=e.movieId,n=e.movies,a=Object(u.useState)(),r=Object(s.a)(a,2),c=r[0],l=r[1],j=function(){var e=Object(o.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.find((function(e){return e.id===t})),l(a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){j()}),[t]),console.log(c),Object(m.jsx)("div",{className:"MovieDetail",children:c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"".concat(c.title,", ").concat(c.year)}),Object(m.jsx)("p",{children:"Format: ".concat(c.format)}),Object(m.jsxs)("ul",{className:"MovieDetail__actors",children:["Actors:",c.actors.map((function(e){return Object(m.jsx)("li",{className:"MovieDetail__actor",children:e.name},e.name)}))]})]}):Object(m.jsx)("h2",{children:"No movie found"})})}))),O=(n(17),l.a.memo((function(e){var t=e.updateMovies,n=Object(u.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],l=Object(u.useState)(2021),j=Object(s.a)(l,2),b=j[0],p=j[1],d=Object(u.useState)(""),f=Object(s.a)(d,2),v=f[0],O=f[1],x=Object(u.useState)([]),w=Object(s.a)(x,2),I=w[0],M=w[1],N=Object(u.useState)(""),y=Object(s.a)(N,2),C=y[0],J=y[1],k=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"title":c(a);break;case"year":p(Number(a));break;case"format":O(a);break;case"actors":J(a);var r=a.split(",").map((function(e){return{name:e}}));M(r)}},E=function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,h({title:r,year:b,format:v,actors:I});case 3:e.sent&&t(),c(""),p(2021),O(""),M([]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{className:"NewMovieForm",onSubmit:E,children:[Object(m.jsxs)("label",{htmlFor:"title",children:["Title:",Object(m.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"title",placeholder:"Enter title",value:r,name:"title",onChange:k})]}),Object(m.jsxs)("label",{htmlFor:"year",children:["Year:",Object(m.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"year",placeholder:"Enter year",value:b,name:"year",onChange:k})]}),Object(m.jsxs)("label",{htmlFor:"format",children:["Format:",Object(m.jsxs)("select",{className:"NewMovieForm__input",id:"format",value:v,name:"format",onChange:k,children:[Object(m.jsx)("option",{value:"",children:"Choose a format"}),Object(m.jsx)("option",{value:"VHS",children:"VHS"}),Object(m.jsx)("option",{value:"DVD",children:"DVD"}),Object(m.jsx)("option",{value:"Blu-Ray",children:"Blu-Ray"})]})]}),Object(m.jsxs)("label",{htmlFor:"actors",children:["Actors:",Object(m.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"actors",placeholder:"Enter actors divided by , ",value:C,name:"actors",onChange:k})]}),Object(m.jsx)("button",{type:"submit",className:"NewMovieForm__button",children:"Add a movie"})]})}))),x=function(){var e=Object(u.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)(""),c=Object(s.a)(r,2),l=c[0],j=c[1],h=Object(u.useState)(""),d=Object(s.a)(h,2),x=d[0],w=d[1],I=Object(u.useState)(!1),M=Object(s.a)(I,2),N=M[0],y=M[1],C=Object(u.useState)(0),J=Object(s.a)(C,2),k=J[0],E=J[1],F=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,n=t.map((function(e){return e.id})),e.next=6,Promise.all(n.map((function(e){return p(e)})));case 6:r=e.sent,a(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){F()}),[]);var S=Object(u.useMemo)((function(){if(n)return n.filter((function(e){return l?e.title.toLowerCase().includes(l):e})).filter((function(e){return x?e.actors.some((function(e){return e.name.toLowerCase().includes(x)})):e})).sort((function(e,t){return N?e.title.localeCompare(t.title):0}))}),[n,l,x,N]),_=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"titleToSearch":j(a.toLocaleLowerCase());break;case"actorToSearch":w(a.toLocaleLowerCase())}};return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("header",{className:"App__header",children:Object(m.jsx)("div",{className:"App__form",children:Object(m.jsx)(O,{updateMovies:F})})}),Object(m.jsxs)("main",{className:"App__main",children:[Object(m.jsx)("div",{className:"App__sidebar",children:S&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"App__filters",children:[Object(m.jsx)("input",{type:"text",placeholder:"Enter title",value:l,name:"titleToSearch",onChange:_}),Object(m.jsx)("input",{type:"text",placeholder:"Enter actor",value:x,name:"actorToSearch",onChange:_}),Object(m.jsx)("button",{type:"button",onClick:function(){return y(!0)},children:"Sort alphabetically"}),Object(m.jsx)("button",{type:"button",onClick:function(){j(""),w(""),y(!1)},children:"Reset"})]}),Object(m.jsx)(f,{selectedMovieId:k,preparedMovies:S,seeMovieDetails:function(e){E(e)},closeMovieDetails:function(){E(0)},updateMovies:F})]})}),Object(m.jsx)("div",{className:"App__content",children:k>0&&S&&Object(m.jsx)(v,{movieId:k,movies:S})})]})]})};r.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.a0ee0336.chunk.js.map