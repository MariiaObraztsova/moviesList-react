(this["webpackJsonpmovieslist-react"]=this["webpackJsonpmovieslist-react"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(2),i=n.n(c),o=n(4),s=n(3),u=n(1),l=n.n(u),j=(n(12),n(13),n.p+"static/media/movies.1ceaf0e8.txt"),b="http://localhost:8000/api/v1/movies",h=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new FormData,e.next=4,fetch(j).then((function(e){return e.blob()}));case 4:return n=e.sent,t.append("movies",n),e.next=8,fetch("".concat(b,"/import"),{method:"POST",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},body:t,redirect:"follow"});case 8:if((a=e.sent).ok){e.next=11;break}throw new Error("".concat(a.status," - ").concat(a.statusText));case 11:return e.abrupt("return",a.json());case 14:throw e.prev=14,e.t0=e.catch(0),new Error("The problem is here ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"?limit=30"),{method:"GET",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("".concat(t.status," - ").concat(t.statusText));case 6:return e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("The problem is here ".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/").concat(t),{method:"GET",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a.data);case 12:throw e.prev=12,e.t0=e.catch(0),new Error("The problem is here ".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b,{method:"POST",headers:{"Content-type":"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},body:JSON.stringify(t),redirect:"follow"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/movies/".concat(t),{method:"DELETE",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJwZXRyb0BnbWFpbC5jb20iLCJuYW1lIjoiUGV0cm92IFBldHJvIiwiY3JlYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwidXBkYXRlZEF0IjoiMjAyMS0xMi0wNVQxNToyNzowOC42MTJaIiwiaWF0IjoxNjM4NzE4MDI4fQ.sCPMPn24hgEA6CIQJADGYh35YjJk11mJI9Zj7KcstXg"},redirect:"follow"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=(n(14),n(0)),x=function(e){var t=e.selectedMovieId,n=e.preparedMovies,a=e.seeMovieDetails,r=e.closeMovieDetails,c=e.updateMovies;return Object(v.jsxs)("div",{className:"MoviesList",children:[Object(v.jsx)("h2",{children:"Movies List"}),Object(v.jsx)("ul",{className:"MoviesList__list",children:n.map((function(e){return Object(v.jsxs)("li",{className:"MoviesList__item",children:["".concat(e.title,", ").concat(e.year),Object(v.jsxs)("div",{className:"MovieList__buttons",children:[Object(v.jsx)("button",{type:"button",onClick:function(){f(e.id),c()},children:"Delete movie"}),e.id===t?Object(v.jsx)("button",{type:"button",onClick:r,children:"Close"}):Object(v.jsx)("button",{type:"button",onClick:function(){return a(e.id)},children:"View details"})]})]},e.id)}))})]})},w=(n(16),l.a.memo((function(e){var t=e.movieId,n=e.movies,a=Object(u.useState)(),r=Object(s.a)(a,2),c=r[0],l=r[1],j=function(){var e=Object(o.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.find((function(e){return e.id===t})),l(a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){j()}),[t]),Object(v.jsx)("div",{className:"MovieDetail",children:c?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h2",{children:"".concat(c.title,", ").concat(c.year)}),Object(v.jsx)("p",{children:"Format: ".concat(c.format)}),Object(v.jsxs)("ul",{className:"MovieDetail__actors",children:["Actors:",c.actors.map((function(e){return Object(v.jsx)("li",{className:"MovieDetail__actor",children:e.name},e.name)}))]})]}):Object(v.jsx)("h2",{children:"No movie found"})})}))),O=(n(17),l.a.memo((function(e){var t=e.updateMovies,n=Object(u.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],l=Object(u.useState)(2021),j=Object(s.a)(l,2),b=j[0],h=j[1],p=Object(u.useState)(""),d=Object(s.a)(p,2),f=d[0],x=d[1],w=Object(u.useState)([]),O=Object(s.a)(w,2),I=O[0],M=O[1],N=Object(u.useState)(""),y=Object(s.a)(N,2),J=y[0],C=y[1],k=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"title":c(a);break;case"year":h(Number(a));break;case"format":x(a);break;case"actors":C(a);var r=a.split(",");M(r)}},E=function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,m({title:r,year:b,format:f,actors:I});case 3:e.sent&&t(),c(""),h(2021),x(""),M([]),C("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("form",{className:"NewMovieForm",onSubmit:E,children:[Object(v.jsxs)("label",{htmlFor:"title",children:["Title:",Object(v.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"title",placeholder:"Enter title",value:r,name:"title",onChange:k})]}),Object(v.jsxs)("label",{htmlFor:"year",children:["Year:",Object(v.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"year",placeholder:"Enter year",value:b,name:"year",onChange:k})]}),Object(v.jsxs)("label",{htmlFor:"format",children:["Format:",Object(v.jsxs)("select",{className:"NewMovieForm__input",id:"format",value:f,name:"format",onChange:k,children:[Object(v.jsx)("option",{value:"",children:"Choose a format"}),Object(v.jsx)("option",{value:"VHS",children:"VHS"}),Object(v.jsx)("option",{value:"DVD",children:"DVD"}),Object(v.jsx)("option",{value:"Blu-Ray",children:"Blu-Ray"})]})]}),Object(v.jsxs)("label",{htmlFor:"actors",children:["Actors:",Object(v.jsx)("input",{className:"NewMovieForm__input",type:"text",id:"actors",placeholder:"Enter actors divided by , ",value:J,name:"actors",onChange:k})]}),Object(v.jsx)("button",{type:"submit",className:"NewMovieForm__button",children:"Add a movie"})]})}))),I=function(){var e=Object(u.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)(""),c=Object(s.a)(r,2),l=c[0],j=c[1],b=Object(u.useState)(""),m=Object(s.a)(b,2),f=m[0],I=m[1],M=Object(u.useState)(!1),N=Object(s.a)(M,2),y=N[0],J=N[1],C=Object(u.useState)(0),k=Object(s.a)(C,2),E=k[0],F=k[1],T=Object(u.useCallback)(Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,n=t.map((function(e){return e.id})),e.next=6,Promise.all(n.map((function(e){return d(e)})));case 6:r=e.sent,a(r);case 8:case"end":return e.stop()}}),e)}))),[]);Object(u.useEffect)((function(){h(),T()}),[T]);var S=Object(u.useMemo)((function(){if(n)return n.filter((function(e){return l?e.title.toLowerCase().includes(l):e})).filter((function(e){return f?e.actors.some((function(e){return e.name.toLowerCase().includes(f)})):e})).sort((function(e,t){return y?e.title.localeCompare(t.title):0}))}),[n,l,f,y]),A=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"titleToSearch":j(a.toLocaleLowerCase());break;case"actorToSearch":I(a.toLocaleLowerCase())}};return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("header",{className:"App__header",children:Object(v.jsx)("div",{className:"App__form",children:Object(v.jsx)(O,{updateMovies:T})})}),Object(v.jsxs)("main",{className:"App__main",children:[Object(v.jsx)("div",{className:"App__sidebar",children:S&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"App__filters",children:[Object(v.jsx)("input",{type:"text",placeholder:"Enter title",value:l,name:"titleToSearch",onChange:A}),Object(v.jsx)("input",{type:"text",placeholder:"Enter actor",value:f,name:"actorToSearch",onChange:A}),Object(v.jsx)("button",{type:"button",onClick:function(){return J(!0)},children:"Sort alphabetically"}),Object(v.jsx)("button",{type:"button",onClick:function(){j(""),I(""),J(!1)},children:"Reset"})]}),Object(v.jsx)(x,{selectedMovieId:E,preparedMovies:S,seeMovieDetails:function(e){F(e)},closeMovieDetails:function(){F(0)},updateMovies:T})]})}),Object(v.jsx)("div",{className:"App__content",children:E>0&&S&&Object(v.jsx)(w,{movieId:E,movies:S})})]})]})};r.a.render(Object(v.jsx)(I,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.1a27e81a.chunk.js.map